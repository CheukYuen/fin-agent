# fin-agent

## AI Agent 云端部署架构

FastAPI + OpenAI + Redis 架构

| 层级         | 技术栈                           | 说明                               |
| ---------- | ----------------------------- | -------------------------------- |
| **Client** | Web前端 / 微信小程序 / 第三方API 调用     | 用户输入界面或业务对接接口                    |
| **API 层**  | FastAPI                       | 提供 HTTP + WebSocket 接口，承接请求，统一调度 |
| **LLM 层**  | OpenAI SDK（gpt-4o / gpt-3.5）  | 调用外部模型服务（流式支持、降级机制）              |
| **状态层**    | Redis                         | 保存会话上下文、短期记忆、对话历史                |
| **工具层**    | 自定义插件系统 + `httpx`（异步 HTTP 工具） | 插件式调用外部 API（搜索、计算、数据库）           |
| **日志层**    | Loguru（结构化日志）                 | 记录每次 Agent 调用、异常、关键变量            |
| **监控层**    | Prometheus + Grafana          | 实时监控调用频率、耗时、异常率，可视化 Dashboard    |

